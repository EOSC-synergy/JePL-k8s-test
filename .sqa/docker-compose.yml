version: "3"

services:
  kubectl:
    #environment:
    #  - KUBECONFIG
    #  - SSH_KEYFILE
    #  - SSH_USER
    build:
      context: "./.sqa/"
      dockerfile: "./Dockerfile"
      #cache_from:
      #  - "bitnami/kubectl:1.23"
    image: "eosc-synergy/kubectl:1.23"
    container_name: "kubectl"
    hostname: "kubectl"
    volumes:
     - ./:/examples
     - ~/.ssh/k8s_synergy_bot_rsa:/.sqa_secrets/ssh_key
     - ~/.ssh/k8s-synergy-master.config:/.sqa_secrets/config

    entrypoint: [ sleep, infinity ]
